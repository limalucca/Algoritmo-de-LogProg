<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAIXA</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #6a7eee;
            margin: 0;
            padding: 20px;
        }

        #detalhes-compra {
            background-color: #52518b;
            border: 5px solid #333333;
            padding: 20px;
            margin-top: 20px;
            font-size: 16px;
            line-height: 1.5;
            color: #000000;
        }

        h2 {
            margin-top: 0;
        }

        pre {
            white-space: pre-wrap;
        }
    </style>
</head>

<body>
    <div id="detalhes-compra"></div>

    <script>
        function calcularParcelas(ValorProduto, numParcelas, JurosPerc) {
            var valorPacela = ValorProduto / numParcelas;
            valorComJuros = valorPacela + (valorPacela * JurosPerc / 100);

            return valorComJuros.toFixed(2);
        }

        var continuar = true;
        var todasCompras = ''; // Variável para armazenar os detalhes de todas as compras

        while (continuar) {
            ValorProduto = parseFloat(prompt('Digite qual o valor do produto: '));

            var confirmaCompra = prompt('Deseja confirmar sua compra? (s/n): ');
            if (confirmaCompra.toLowerCase() !== 's') {
                console.log('COMPRA CANCELADA!!');
                todasCompras += 'COMPRA CANCELADA!!!\n\n';
            } else {
                var detalhesCompra = '';

                FormaPagamento = prompt('FORMAS DE PAGAMENTO: Digite 1 para PIX ou 2 para CRÉDITO.');
                if (FormaPagamento.toLowerCase() === "1") {
                    var desconto = ValorProduto * 0.15;
                    var valorFinal = ValorProduto - desconto;
                    detalhesCompra += 'Forma de pagamento: Pix\n';
                    detalhesCompra += 'Desconto: R$ ' + desconto.toFixed(2) + '\n';
                    detalhesCompra += 'Valor final da compra: R$ ' + valorFinal.toFixed(2);

                } else if (FormaPagamento.toLowerCase() === "2") {
                    var numParcelas = parseFloat(prompt('Digite o número de parcelas desejado: '));
                    var JurosPerc = parseFloat(prompt('Digite o percentual de juros por parcela: '));
                    var valorParcelaComJuros = calcularParcelas(ValorProduto, numParcelas, JurosPerc);
                    detalhesCompra += 'Forma de pagamento: Crédito\n'
                    detalhesCompra += 'Número de parcelas: ' + numParcelas + '\n';
                    detalhesCompra += 'Valor Percentual de Juros: ' + JurosPerc + '% \n';
                    detalhesCompra += 'Valor da parcela com juros: R$' + valorParcelaComJuros;
                } else {
                    var valorFinal = ValorProduto;
                    detalhesCompra += 'Forma de pagamento: Não escolhida\n';
                    detalhesCompra += 'Valor Final da compra: R$ ' + valorFinal.toFixed(2);
                }

                todasCompras += 'DETALHES DA COMPRA:\n' + detalhesCompra + '\n\n'; // Atualiza a variável com os detalhes de todas as compras
            }

            var detalhesElement = document.getElementById("detalhes-compra");
            detalhesElement.innerText = todasCompras; // Exibe todos os detalhes de compra

            var resposta = prompt('Deseja fazer outra compra? (s/n): ');
            if (resposta.toLowerCase() !== 's') {
                continuar = false;
                console.log('Obrigado pela preferência!!');
            }
        }
    </script>
</body>

</html>
